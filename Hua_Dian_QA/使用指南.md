# 华电问答机器人 (Hua_Dian_QA) 使用指南 (v2.0)

欢迎使用新版华电问答机器人！本系统现已升级为**无缝集成式应用**，您可以在 Web 界面中完成所有操作，包括提问、管理文档和更新知识库，**无需重启应用**。

---

### ✨ 核心优势

*   **一键式操作**：所有功能集于 Web 界面，无需切换到终端或执行额外脚本。
*   **无需重启**：更新知识库后，系统会自动在后台完成加载，问答服务不中断。
*   **智能增量更新**：系统自动检测文档变更（新增、修改、删除），只更新变化部分，大幅缩短更新时间。
*   **即时可用**：应用启动后，即使知识库正在后台构建，也可立即开始交互。

---

### 步骤一：启动问答机器人

这是您唯一需要从终端执行的命令。

1.  **启动 Web 应用**：
    *   打开您的项目终端（确保已激活 Python 虚拟环境，如 `.venv`）。
    *   执行以下命令：
      ```bash
      python Hua_Dian_QA/main.py webapp
      ```
    *   应用启动后，终端会显示一个本地 URL (例如 `http://127.0.0.1:7860`)。

2.  **开始使用**：
    *   在浏览器中打开上述 URL。
    *   **首次启动**：如果知识库为空，系统会在后台自动开始构建。您可以在“知识库管理”选项卡看到状态。在此期间，问答功能可能会提示“正在初始化”，构建完成后即可正常使用。
    *   **日常使用**：直接在“智能问答”标签页中输入问题进行交互。

---

### 步骤二：管理和更新知识库

所有知识库的维护工作现在都在 Web 界面中完成。

1.  **管理本地文档**：
    *   直接在 `Hua_Dian_QA/docs/` 文件夹中**添加、修改或删除**您的文档文件（如 `.txt`, `.pdf`, `.docx`）。
    *   您也可以使用传统的文件管理器来操作这些文件。

2.  **在 Web 界面中更新知识库**：
    *   完成文档修改后，切换到“**知识库管理**”标签页。
    *   根据您的需求选择操作：
        *   **增量更新知识库 (推荐)**：
            *   点击此按钮，系统将自动扫描 `docs` 目录，找出变更并只更新这些文件。
            *   这是**最快**的更新方式，适用于日常的文档增删改。
        *   **强制重建知识库**：
            *   点击此按钮，系统将删除旧的知识库，并根据 `docs` 目录中的所有文件从头开始构建一个新的。
            *   此操作耗时较长，仅在您怀疑知识库出现问题或希望进行彻底清理时使用。

3.  **观察更新状态**：
    *   点击任一更新按钮后，下方的“更新状态”文本框会显示任务进度。
    *   更新任务在后台运行，**不会影响您继续使用问答功能**（在更新完成前，问答仍基于旧知识库）。
    *   当状态显示“知识库更新完成！”时，系统已自动加载了新的知识库，您可以立即开始就新内容提问。

---

### 总结

新版工作流程极其简化：

1.  **启动**：运行 `python Hua_Dian_QA/main.py webapp`。
2.  **更新**：
    *   在 `docs` 文件夹里修改文件。
    *   去 Web 界面，点击“**增量更新知识库**”。
    *   等待状态提示完成，即可享受更新后的问答服务。

**再也不需要手动运行脚本或重启应用了！**